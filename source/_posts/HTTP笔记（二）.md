---
title: 简单的HTTP协议
date: 2019-12-12 19:42
updated: 2019-12-12 19:42
index_img: ./blog-img/http.jpg
categories: HTTP
tags: HTTP
---

### 简单的HTTP协议

##### HTTP是用于客户端和服务端之间的通信

<p>两台计算机在使用HTTP协议进行通信的时候，那么这一条通信线路上必定有一端是客户端，另外一端是服务端；HTTP协议能确定哪一端是客户端哪一端是服务端；</p>

##### 通过请求和响应的交换达成通信

<p>HTTP规定，请求是从客户端发出的，最后从服务器端响应该请求并返回；</p>

<p>上述这一句话是指，肯定是从客户端最先开始建立通信的，服务端在没有接收到请求的时候是不会发送响应的。如下一个HTTP求情报文中部分内容：</p>

```http
GET /index.html HTTP/1.1
Host: hackr.jp
```

>起始行中的GET表示了请求访问服务器的类型， 称为方法（method）；
>
>随后的字符串 /index.html 表示了请求的访问资源对象，也叫请求URI（request-URI）；
>
>最后的HTTP/1.1， 标识了HTTP的版本号；

<p>在我么做出请求后，对应的也存在响应报文：</p>

```http
HTTP/1.1 200 OK
Date: Tue, 10 Jul 2021 18:59:59 GMT
Content-Length: 362
Content-Type: text/html
```

>对应的HTTP/1.1 对应了HTTP的版本；
>
>200 OK是0请求的处理结果的状态码（status code）和原因短语（reason-phrase）；
>
>Date, 是首部字段（header field）的一个属性；

##### HTTP不是保存状态的协议

<p>HTTP不是保存状态的协议，即无状态（stateless）协议；HTTP对于发送和响应的状态不做保存 ，表示HTTP对请求和响应都不做持久化处理；</p>

<p>除此之外，HTTP除了不保存状态之外，对于新的请求和响应自身也不保存上一请求或者响应的报文等信息；这是为了更加极速的处理业务，保证HTTP的可伸缩性；</p>

<p>但是我们在一些业务中需要持久的状态，所以引入了Cookie，Cookie就可以管理状态，后续文章会详细讲解Cookie。</p>

##### 请求URI定位资源

在上述的请求报文例子中，我们看到**GET /index.html HTTP/1.1**这样的字段，我们可以在这里将请求的URI写完整比如这样：

```http
GET http://hackr.jp/index.html HTTP/1.1
```

如果请求的URI不完整，那么在首部的字段的**Host**中写清楚了域名或者IP值；

当我们是对服务器本身发起请求的时候，那么就可以将URLI地址简写成一个*， 下面这个是查看服务端支持的HTTP的种类：

```http
OPTIONS * HTTP/1.1
```

##### 告知服务端意图的HTTP方法

**GET：获取资源**

​	GET方法用来获取已经被URI识别的资源；指定的资源经过服务端解析后随着响应返回；如果请求资源是文本则原样返回，如果是CGI（Common Gateway Interface, 通用网关接口）那样的程序，则返回经过执行的结果，下面是几个请求例子：

| 请求                                                         | 响应                                            |
| ------------------------------------------------------------ | ----------------------------------------------- |
| GET /index.html HTTP/1.1<br />Host: www.hackr.jp             | 返回对应域名下面的Index.html的页面资源          |
| GET /index.html HTTP/1.1<br />Host: www.hackr.jp<br />If-Modified-Since: The, 12 Jul 2021 07:30:30 GMT | 返回2021年7月12日07:30:30后的index.html页面资源 |

**POST：传输实体主体**

​	POST方法主要是传输实体的主体；

| 请求                                                         | 响应                             |
| ------------------------------------------------------------ | -------------------------------- |
| POST /submit.cgi HTTP/1.1<br />Host: www.hackr.jp<br />Content-Length: 326(326个字节) | 返回submit.cgi的接受数据处理结果 |

**PUT： 传输文件**

​	PUT方法主要是传输文件；

​	由于HTTP/1.1的PUT方法自身不存在验证机制，即所有人都可以上传文件， 所以一般不会使用PUT上传文件；

**HEAD： 获取报文的首部**

​	HEAD方法和GET方法其实差不多，但是HEAD方法不返回报文主体部分而已；一般用来确认URI的有效性以及资源的更新日期；

**DELETE： 删除文件**

​	DELETE方法与PUT方法相反，是按照请求的URI删除指定资源；

​	同时与PUT方法一样HTTP/1.1中不带验证机制，所以一般也没使用；

**OPTIONS： 询问支持的方法**

​	OPTIONS方法是用来查询针对请求的URI指定资源支持的方法；

**TRACE： 追踪路径**

​	TRACE的方法就是让web服务端将之前的请求通信环回给客户端的方法；

​	在发送请求的时候， 在Max-Forwards首部字段中填入数值， 每次经过一个服务器就-1，当数值刚好到0的时候，就停止该传输，最后接收到请求的服务器端返回的200 OK的状态码；

​	TRACE方法可以查询发送出去的请求是怎么样子经过加工的修改的，这是因为在请求资源中，可能出现的代理中转，TRACE方法就是确认连接过程中这一系列操作；这一方法并不是很常用，这一个方法很容易引起XST（跨站追踪）；

**CONNECT：要求用隧道协议连接代理**

​	CONNECT方法主要是要求与代理服务器通信的时候建立隧道，，实现用隧道协议进行TCP通信。主要是用SSL（安全套接层）和TLS（传输层安全）协议把内容加密后经过网络隧道传输；例子如下：

```http
CONNECT proxy.hackr.jp HTTP/1.1
Host: proxy.hackr.jp
```

经过响应之后进入网络隧道。

​	

​	
